https://youtu.be/q3jd6vSMtGA?si=1C04p1dO5z9g5ReA

파일 시스템과 프로세스

ㅇ 권한 및 그룹 설정
1. 리눅스의 파일 권한 관리
- 모든 파일(디렉토리)에 접근권한(permission)과 소유권을 설정하여 관리
- 권한: 사용자, 그룹이 해당 파일을 어떻게 사용할 수 있는지 설정
    - 파일유형 + 접근권한, 물리적 파일 연결개수(하드링크), 소유자, 소유 그룹, 크기, 마지막 변경 날짜+시간, 파일명
rwx-rwx-rwx
소유자 그룹 others
r- read
w- write
x- 실행
권한에 따라 실행할 수 있는 것이 다름
-rw-r--r-- => 소유자는 읽기 쓰기만 가능 실행 불가. 그룹,others는 읽기만 가능
앞에가 - 면 일반 파일 d면 디렉토리
디렉토리의 x는 디렉토리 안에 들어가서 작업할 수 있다는 것

2. chown - 파일(디렉터리)의 사용자(그룹) 소유권 변경
- chown<옵션>[소유자][;그룹명][파일명]
    -옵션: -R(하위 디렉터리 포함)
ex.
[LinuxMaster]#chown chris:chris sample.txt

3. chgrp - 파일(디렉터리)의 그룹 소유권 변경
- chgrp<옵션>[그룹명][파일명]
    -옵션:-R(하위 디렉터리 포함)

4. chmod - 파일(디렉터리)의 접근 권한 변경
- chmod<옵션>[권한][파일명]
    -옵션:-R(하위 디렉터리 포함)
-chmod 명령의 다양한 사용 방식
    -예) chmod +x file(모두에게 실행 권한), chmod -x file(모두에게 실행 불가), chmod u+x file(사용자에게 실행 권한), chmod g=rx file(그룹에게 읽기와 실행), chmod o-x file(기타 다른 사람들 실행 불가),
    chmod a+r file, chmod766 file => rwx가 4,2,1을 뜻하기 때문에 7은 rwx && rw가 4,2를 뜻하기 때문에 6 (2의 승으로 계산)

5. umask - 파일/디렉터리 생성시 기본으로 적용할 접근권한 지정
- 주의:파일은 '666 - umask'값, 디렉터리는'777 - umask' 값으로 설정.
- umask<옵션>[설정값]
    -옵션:-S(문자로 표시)
ex.
[LinuxMaster]#umask
0022
[LinuxMaster]#umask 002
[LinuxMaster]#touch new.txt
[LinuxMaster]#ls-al
...
-rw-r--r-- 1 root root ...... msg.txt
-rw-rw-r-- 1 root root ...... new.txt

6. 리눅스의 파일의 특수 권한
- 대상 파일을 사용하는 프로세스가 실행되는 동안 설정된 접근권한으로 전환하여 사용하는 특징 -> 유효사용자/유효그룹이 변경
- SetUID : 소유자 권한으로 실행 (4000)
- SetGID : 소유 그룹 권한으로 실행 (2000)
- s(실행파일), S(일반파일)
ex.
[LinuxMaster]#chmod u+s test.sh
[LinuxMaster]#ls -al test.sh
-rwsr-xr-x 1 root root ...... test.sh
[LinuxMaster]#chmod 2644 test.sh    (chmod == SetGID, 2644 == 2000) 즉, 소유 그룹 권한 실행으로 변경
[LinuxMaster]#ls -al test.sh
-rw-r-Sr-- 1 root root ...... test.sh

- (공유) 폴더에 대하여 소유자 혹은 root만 파일을 수정하거나 삭제할 수 있는 특징
- Sticky bit(1000)
- t로 표시
ex.
[LinuxMaster]#mkdir tmp
[LinuxMaster]#chmod +t tmp
[LinuxMaster]#ls -al
...
drwxrwxr-t 2 root root .... tmp

7. 디스크 쿼터 (Disk Quota)
- 사용자(그룹)이 파일 시스템에서 생성(사용)할 수 있는 파일의 용량(개수)
    -inode 개수 제한, 할당된 디스크 블록 수 제한 -> 사용자(그룹)별, 파일 시스템별 동작
- 디스크 쿼터 설정 파일 및 관련 명령어
    -설정 파일(/etc/fstab), 사용자 쿼터 파일(aquota.user), 그룹 쿼터 파일(aquota.group)
    - 마운팅, 재마운팅 : mount -o remoung/QUOTA
    - quotaoff(비활성화), quotaon(활성화), quotacheck(파일시스템의 디스크 사용 상태 점검)
    - setquota(명령어를 이용한 사용자/그룹 쿼터 설정), edquota(편집기를 이용한 사용자/그룹 쿼터 설정)

ㅇ 파일 시스템의 관리
1. 파일 시스템의 개요
- 스토리지 장치(디스크)상에 파일을 관리할 수 있도록 만들어 놓은 구조 혹은 관리하는 방식 -> 서버 파일 접근, 가상파일까지 확대
- 리눅스의 파일 시스템 구조
    - Super Block(파일 시스템 관련 정보, 블록크기 및 개수, inode 개수), Group Descriptor Table(Block 그룹 관리)
    - Block Bitmap(블록의 사용 상태), inode(파일 이름을 제외한 정보, 고유번호, 파일 형태, 크기, 위치, 소유자 등)

2. 리눅스 파일 시스템 종류와 특징(저널링 파일 시스템)
ext(ext1)   - 리눅스 초기에 사용되던 파일 시스템이며 호환성이 없음
            - ext2의 원형
            - 2GByte의 데이터와 파일명을 255자까지 지정 가능
            - 파일 접근에 대한 타임 스탬프, 아이노드 수정 지원 불가
ext2        - ext 파일 시스템의 다음 버전
            - 고용량 디스크 사용을 염두하고 설계된 파일 시스템
            - 쉽게 호환되며 업그레이드도 쉽게 설계되어 있음음
ext3        - ext2의 확장판
            - 리눅스의 대표적인 저널링(jornaling)을 지원하도록 확장된 파일 시스템
            - ACL(Access Control List)을 통한 접근 제어 지원
ext4        - ext2 및 ext3와 호환성이 있는 확장 버전
            - 파일에 디스크 할당 시 물리적으로 연속적인 블록을 할당
            - 64비트 기억 공간 제한을 없앰
            - 16 TeraByte의 파일을 지원
JFS         - Journaling File System의 약자
            - IBM사의 독자적인 저널링 파일 시스템
            - GPL로 공개하여 현재 리눅스용으로 개발
xfs         - eXetended File System
            - 고성능 저널링 시스템
            - 64비트 주소를 지원하며 확장성이 있는 자료 구조와 알고리즘 사용
            - 파일 수에 관계없이 예상치 못한 상황으로부터 신속한 복구와 재시작 가능
            - 데이터 읽기/쓰기 트랜잭션으로 성능 저하를 최소화
            - 64비트 파일 시스템으로 큰 용량의 파일도 다룰 수 있음
            - 높은 확장성과 처리량을 가짐
ReiserFS    - 독일의 한스 라이저(Hans Reiser)가 개발한 파일 시스템
            - 리눅스용 저널링 파일 시스템 중에서 가장 안정적이라는 평가를 받음
            - 모든 파일 객체들을 B트리에 저장, 간결한 색인화된 디렉터리 지원

3. 리눅스 파일 시스템 종류와 특징(네트워크 파일 시스템)
SMB         - 삼바(samba) 파일 시스템을 마운트 지정
            - Server Message Block(서버 메시지 블록)
            - 윈도우 계열 OS 환경에서 사용되는 파일/프린터 공유 프로토콜
            - 리눅스, 유닉스 계정 OS와 윈도우 OS와의 자료 및 하드웨어 공유
            - 윈도우에서 표준 클라이언트 환경으로 처음부터 구성되었고 NFS 유닉스 표준 응용부터 운용상 쉽다는 장점이 있음
CIFS        - Common Internet File System
            - SMB를 확장한 파일 시스템
            - SMB를 기초로 응용하여 라우터를 뛰어넘어 연결할 수 있는 프로토콜
NFS         - Network File System(네트워크 파일 시스템)
            - 썬마이크로시스템(SUN)이 개발한 네트워크 공유 프로토콜
            - 파일 공유 및 파일 서버로 사용됨
            - 공유된 영역을 마운트할 때 지정
            - 하드웨어, 운영체제 또는 네트워크 구조가 달라도 공유 가능
            - NFS 서버의 특정 디렉터리를 마운트하여 사용할 수 있음

4. 리눅스 파일 시스템 종류와 특징(지원 가능한 기타 파일 시스템)
FAT         - Windows NT가 지원하는 파일 시스템 중 가장 간단한 시스템
            - FAT로 포맷된 디스크는 클러스터 단위로 할당
            - 클러스터 크기는 볼륨 크기에 따라 결정
            - 읽기 전용, 숨김, 시스템 및 보관 파일 특성만 지원
            - 삼바(samba) 파일 시스템을 마운트 지정
VFAT        - FAT 파일 시스템이 확장된 것으로 FAT와 호환
(Virtual FAT) FAT보다 제한이 적음
            - 파일 이름도 최고 255자까지 만들 수 있음
            - 공백이나 여러 개의 구두점도 포함
            - 대소문자는 지정한 대로 보존되기는 하나 구별하지는 않음
FAT32       - SMB를 확장한 파일 시스템
            - Windows95,98 및 ME와 같은 버전과 다중 부팅을 구성
            - 32GB보다 큰 파티션을 만들 수 없고 파티션에 4GB를 초과하는 파일을 저장할 수 없음
NTFS        - 윈도우에서 사용하는 파일 시스템
            - 안정성이 뛰어나고 대용량 파일도 저장
            - 안정성, 자세한 사용자 제한, 보안성 등이 FAT32보다 뛰어남
            - 파일 크기 및 볼륨은 이론상으로 최대 16EB(ExaByte=10의18승byte)이나 실질적으로는 2TB로 한계가 있음
ISO9660     - CD-ROM의 표준 파일 시스템
            - 1988년에 제정된 표준
UDF         - Universal Disk Format의 약자로 최신 파일 시스템 형식 
            - OSTA(Optical Storage Technology Association)에 의해 개발
            - 광학 매체용 파일 시스템 표준
            - ISO9660 파일 시스템을 대체하기 위한 것으로 대부분 DVD에서 사용
            - DVD 멀티미디어 디스크들은 MPEG오디오 및 비디오 스트림을 담기 위해 사용
HPFS        - OS/2 운영체제를 위해 만들어진 파일 시스템
            - 1988년 발표, 마이크로소프트와 IBM이 공동 개발

5. mount - (스토리지) 장치를 연결하여 디렉토리처럼 사용
- 설정 파일:/etc/fstab(부팅 시 참조하여 마운트), /etc/mtab(마운트된 블록 시스템 정보)
- mount<옵션>[장치명][디렉터리명]
    -옵션: -a(/etc/fstab의 내용 모두 마운트), -n(/etc/mtab 설정정보 기록 안 함), -f(마운트 테스트), -t(파일 시스템), -o(remount,ro,rw,sync,noatime 등 추가 설정)

6. unmount - 마운트를 해제하는 명령어
-unmount<옵션>[장치명][디렉터리명]
    -옵션: -a(/etc/fstab의 내용 모두 마운트 gowp), -n(/etc/mtab 설정정보 기록 안 함), -t(파일 시스템)

7. eject - (미디어) 장치를 해제하고 장치 제거
- eject<옵션>[장치명]
    -옵션: -r(CD-ROM장치), -f(Floppy장치)

8. mkfs - 파일 시스템 생성
- mkfs<옵션>[장치명]
    - 옵션: -V(자세한 정보 표시), -t(파일 시스템), -c(Bad Block검사), -l(지정한 파일명에서 Bad Block 목록 읽기), -v(진행 상태 표시)

9. mk2fs - ext2, ext3, ext4 리눅스 파일 시스템 생성
- mk2fs<옵션>[장치명]
    -옵션: -t(파일타입), -b(블록 크기, 바이트), -i(inode당 바이트 수), -j(저널링 파일 시스템 ext3), -R(RAID4)

10. fsck - 파일시스템 점검 및 복구
- /lost+found 디렉터리에 손상된 파일 관리 -> 정상 복구 된 후 삭제
- fsck<옵션>[장치명]
    -옵션 : -A(/etc/fstab의 모든 시스템 점검), -a(자동 복구), -r(확인 후 복구), -t(파일 시스템)

11. e2fsck - ext2, ext3, ext4 리눅스 파일 시스템 점검 및 복구
- e2fsck<옵션>[장치명]
    -옵션 : -p(자동 복구), -n(모든 확인에 no로 응답), -y(모든 확인에 yes로 응답), -c(Bad Block 점검), -f(문제가 없는 시스템까지 강제 점검)

12. du - 디렉터리 별 디스크 사용량 확인
- du <옵션>[파일/디렉터리]
    - 옵션 : -n(용량단위로 표시), -a(모든 파일 대상), -m(MB단위로 표시), -k(KB단위로 표시), -s(총 합계만 표시), -c(사용정보 표시 후 합계 표시)
ex.
[LinuxMaster]#du master/
4 master/tmp
8 master/mydirectory
32 master/

13. df - 마운트된 저장장치의 용량 표시 -> 파티션 단위로 사용량 확인, 기본 1024byte 블록단위 출력
-df<옵션><파일명>
    - 옵션: -n(용량 단위로 표시), -T(파일 시스템 유형 정보, 파티션 정보), -t(표시 파일 시스템 유형), -a(모든 파일 시스템), -k(--block-site=1K), -i(inode 사용률)

14. /etc/fstab - 파일 시스템 정보 저장 및 관리하는 설정 파일, 부팅시 마운트 정보 포함
